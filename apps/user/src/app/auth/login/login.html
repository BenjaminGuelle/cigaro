<ion-header>
    <ion-toolbar color="primary">
        <ion-title>Connexion</ion-title>
    </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
    <ion-card>
        <ion-card-header>
            <ion-card-title>Bienvenue sur Cigaro</ion-card-title>
        </ion-card-header>

        <ion-card-content>
            <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
                <ion-item>
                    <ion-label position="floating">Email</ion-label>
                    <ion-input type="email" formControlName="email"></ion-input>
                </ion-item>

                <ion-item>
                    <ion-label position="floating">Mot de passe</ion-label>
                    <ion-input type="password" formControlName="password"></ion-input>
                </ion-item>

                @if (errorMessage()) {
                    <ion-text color="danger">
                        <p class="ion-padding">{{ errorMessage() }}</p>
                    </ion-text>
                }

                <ion-button
                        expand="block"
                        type="submit"
                        [disabled]="loginForm.invalid || loading()"
                        class="ion-margin-top">
                    @if (loading()) {
                        <ion-spinner name="crescent"></ion-spinner>
                    } @else {
                        Se connecter
                    }
                </ion-button>

                <ion-button
                        expand="block"
                        fill="outline"
                        (click)="signInWithGoogle()"
                        class="ion-margin-top">
                    Continuer avec Google
                </ion-button>

                <ion-button
                        expand="block"
                        fill="outline"
                        (click)="signInWithApple()"
                        class="ion-margin-top">
                    Continuer avec Apple
                </ion-button>
            </form>
        </ion-card-content>
    </ion-card>
</ion-content>